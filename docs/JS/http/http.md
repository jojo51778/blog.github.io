## http报文首部
![报文首部](/httpheader.jpg)
#### 通用首部字段
![通用首部字段](/generalfield.jpg)
#### 实体首部字段
![实体首部字段](/entityfield.jpg)
### HTTP请求报文
在请求中，HTTP报文由方法、URL、HTTP版本、HTTP首部字段等部分构成

![请求报文](/requestheader.jpg)
#### 请求首部字段
![请求首部字段](/requestfield.jpg)
### HTTP响应报文
在响应中，HTTP报文由HTTP版本、状态码（数字和原因短语）、HTTP首部字段3部分组成

![响应报文](/responseheader.jpg)
#### 响应首部字段
![请求首部字段](/responsefiled.jpg)

### 缓存请求指令
![缓存请求指令](/requestcache.jpg)
### 缓存响应指令
![缓存响应指令](/responsecache.jpg)

## 与HTTP协作的Web服务器

一台Web服务器可以搭建多个独立域名的Web网站，也可以作为通信路径的中转服务器提升传输效率

### 用单台虚拟主机实现多个域名
在相同的IP地址下，由于虚拟主机可以寄存多个不同主机名和域名的Web网站，因此在发送HTTP请求时，
必须在Host首部内完整指定主机名或者域名的URI

### 通信数据转发程序：代理、网关、隧道

#### 代理
代理是一种有转发功能的应用程序，它扮演了位于服务器和客户端“中间人”的角色，接收由客户端的请求并
转发给服务器，同时也接收服务器返回的响应并转发给客户端,转发时需要加入Via首部信息字段以标记经过的主机信息
![代理](/proxy.jpg)

好处：利用缓存技术减少网络带宽的流量，组织内部针对网站的访问控制，以获取访问日志为主要目标

##### 缓存代理
代码转发响应时，缓存代理会预先将资源的副本保存在代理服务器上，当再次请求相同资源，直接从代理服务器返回

##### 透明代理
转发请求或响应时，不对报文做任何加工的代理类型称为透明代理。反之，对报文内容进行加工的代理称为非透明代理

#### 网关
网关是转发其他服务器通信数据的服务器，接收从客户端发来的请求时，它就像自己拥有资源的源服务器一样对请求进行处理。
有时客户端可能都不会察觉，自己的通信目标是个网关。
![网关](/gateway.jpg)
利用网关可以由http请求转化为其他协议通信
好处：利用网关能提高通信的安全性，因为可以在客户端与网关之间的通信线路上加密以确保连接的安全。比如网关可以连接数据库，
使用SQL语句查询数据

#### 隧道
隧道是相隔甚远的客户端和服务器两者之间的进行中转，并保持双方连接的应用程序
![隧道](/tunnel.jpg)
隧道可以按要求建立一条与其他服务器的通信道路，届时使用SSL等加密手段进行通信，通过隧道的传输，可以和远距离的服务器安全通信，隧道本身透明的，
客户端不用在意隧道的存在

### 缓存
代理服务器缓存
![服务器缓存](/servercache.jpg)


客户端缓存

![客户端缓存](/clientcache.jpg)